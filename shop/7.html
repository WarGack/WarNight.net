<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GDH — ключ</title>
  <link rel="stylesheet" href="/_s.css">
  <script src="/_h.js"></script>
</head>
<body>
  <div class="page">
    <div class="hero">
      <p class="badge">Цифровой ключ</p>
      <h1>GDH</h1>
      <p class="muted">Доставка на email сразу после оплаты. Современный выбор количества с прозрачной ценой.</p>
    </div>

    <div class="panel" style="margin-top:20px; display:grid; gap:18px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); align-items:start;">
      <div class="stack">
        <img class="product-img" src="/shop/7.avif" alt="GDH Key">
        <p class="muted">Ключ для GDH. Указывайте тот же email, что будете использовать для активации.</p>
      </div>

      <div class="stack">
        <p class="price-tag">$4.99</p>
        <label for="email">Email для получения ключа</label>
        <input id="email" type="email" placeholder="you@example.com">

        <label for="qty">Количество</label>
        <input id="qty" type="number" min="1" max="10" value="1">

        <button class="btn" onclick="pay()">Оплатить</button>
      </div>
    </div>

    <script src="/_f.js"></script>
  </div>

  <script>
  async function pay(){
    const e = email.value.trim();
    if(!e) return alert("Введите email");
    const q = Math.max(1, Math.min(10, +qty.value || 1));
    qty.value = q;
    const resp = await fetch("/api/np",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({amount:+(4.99*q).toFixed(2),desc:`7x${q} ${e}`})
    });
    location = await resp.text();
  }
  </script>
</body>
</html>
